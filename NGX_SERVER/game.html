<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <style>
      body {
	      margin: 0px;
	      padding: 0px;
      }
    </style>
  </head>
  <body>
	  <canvas id="myCanvas" width="800" height="600"></canvas>  
  </body>
  <script src="/socket.io/socket.io.js"></script>
  <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
  <script>
  
	var canvas = document.getElementById('myCanvas');
	var context = canvas.getContext('2d');
	var centerX = canvas.width / 2;
	var centerY = canvas.height / 2;
	var radius = 70;
  
  	var socket = io();
  	
  	$('form').submit(function() {
	  socket.emit('chat message', $('#m').val());
	  $('#m').val('');
	  return false;
  	});
  	
  	socket.on('chat message', function(msg) {
	  $('#messages').append($('<li>').text(msg));	
  	});
  	
  	socket.on('moving circle', function(event) {
	  	$.moveCircle(event);
  	});
  	
  	$.init = function() {
	  	
		
		context.beginPath();
		context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
		context.fillStyle = 'green';
		context.fill();
		context.lineWidth = 5;
		context.strokeStyle = '#003300';
		context.stroke();
  	}
  	
  	$.moveCircle = function(xy) {
	  	// Clear Canvas
	  	context.clearRect(0, 0, canvas.width, canvas.height);
	  	context.beginPath();
		context.arc(xy[0], xy[1], radius, 0, 2 * Math.PI, false);
		context.fillStyle = 'green';
		context.fill();
		context.lineWidth = 5;
		context.strokeStyle = '#003300';
		context.stroke();
  	}

      $.init();
    </script>
</html>